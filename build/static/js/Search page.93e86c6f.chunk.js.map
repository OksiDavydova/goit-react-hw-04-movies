{"version":3,"sources":["components/SearchBar/Searchbar.module.css","components/SearchBar/Searchbar.js","views/SearchPage.js","serviceApi/serviceApi.js","components/ScrollToLoadBtn.jsx","components/MovieItem/MovieItem.js","components/MovieItem/MovieItem.module.css","components/Button/Button.js","components/Button/Button.module.css","style/list.module.css","style/LoaderButton.module.css"],"names":["module","exports","Searchbar","onSubmit","useState","searchQuery","setSearchQuery","reset","className","s","searchbar","search_form","e","preventDefault","trim","toast","error","type","search_form_button","button_label","search_form_input","value","onChange","searchNormalize","target","toLowerCase","autoComplete","autoFocus","placeholder","theme","SearchPage","history","useHistory","location","useLocation","queryFromUrl","URLSearchParams","search","get","query","sethQuery","result","setResult","status","setStatus","page","setPage","loading","setLoading","useEffect","fetchMoviesByKeyWord","then","data","prev","ScrollToLoadBtn","catch","err","console","log","push","Loader","length","list_home_page","map","id","poster_path","original_title","to","pathname","state","from","label","MovieItem","Button","onClickLoadMore","style","loader","API_KEY","axios","defaults","baseURL","fetchMovies","a","url","config","response","results","fetchMoviesByTrending","keyWord","fetchMovieById","movie_id","fetch","ok","json","Promise","reject","Error","fetchMovieCredits","fetchMovieReviews","window","scrollTo","top","document","documentElement","scrollHeight","behavior","item","item_image","src","alt","item_title","children","onClick","button","btn_children"],"mappings":"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","file":"static/js/Search page.93e86c6f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__2GrZ3\",\"search_form\":\"Searchbar_search_form__3u_m6\",\"search_form_button\":\"Searchbar_search_form_button__2YPWC\",\"button_label\":\"Searchbar_button_label__NHuSR\",\"search_form_input\":\"Searchbar_search_form_input__3BTU9\"};","import PropTypes from \"prop-types\";\r\nimport { useState } from \"react\";\r\nimport s from \"./Searchbar.module.css\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n// import { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nexport function Searchbar({ onSubmit }) {\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  const handleChange = ({ target }) => {\r\n    const searchNormalize = target.value.toLowerCase();\r\n    setSearchQuery(searchNormalize);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    // console.log(e);\r\n    e.preventDefault();\r\n\r\n    if (searchQuery.trim() === \"\") {\r\n      reset();\r\n      return toast.error(\"Enter a keyword!\");\r\n    }\r\n    // console.log(\"search query\", searchQuery);\r\n    onSubmit(searchQuery);\r\n    reset();\r\n  };\r\n\r\n  const reset = () => {\r\n    setSearchQuery(\"\");\r\n  };\r\n\r\n  return (\r\n    <header className={s.searchbar}>\r\n      <form className={s.search_form} onSubmit={handleSubmit}>\r\n        <button type=\"submit\" className={s.search_form_button}>\r\n          <span className={s.button_label}>Search</span>\r\n        </button>\r\n\r\n        <input\r\n          className={s.search_form_input}\r\n          type=\"text\"\r\n          value={searchQuery}\r\n          onChange={handleChange}\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search movies\"\r\n        />\r\n      </form>\r\n      <ToastContainer theme=\"dark\" />\r\n    </header>\r\n  );\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func,\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\r\nimport { Searchbar } from \"../components/SearchBar/Searchbar\";\r\nimport { fetchMoviesByKeyWord } from \"../serviceApi/serviceApi\";\r\nimport { MovieItem } from \"../components/MovieItem/MovieItem\";\r\nimport { Button } from \"../components/Button/Button\";\r\nimport Loader from \"../components/Loader/Loader\";\r\nimport s from \"../style/list.module.css\";\r\nimport style from \"../style/LoaderButton.module.css\";\r\nimport ScrollToLoadBtn from \"../components/ScrollToLoadBtn\";\r\n\r\nexport default function SearchPage() {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const [query, sethQuery] = useState(() => {\r\n    const queryFromUrl = new URLSearchParams(location.search).get(\"query\");\r\n    return queryFromUrl ? queryFromUrl : \"\";\r\n  });\r\n  const [result, setResult] = useState([]);\r\n  const [status, setStatus] = useState(\"init\");\r\n  const [page, setPage] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const onSubmit = (searchQuery) => {\r\n    sethQuery(searchQuery);\r\n    history.push({ ...location, search: `query=${searchQuery}` });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (query) {\r\n      setStatus(\"pending\");\r\n      fetchMoviesByKeyWord(query, page)\r\n        .then((data) => {\r\n          // console.log(data);\r\n          if (page === 1) {\r\n            setResult(data);\r\n          } else {\r\n            setResult((prev) => [...prev, ...data]);\r\n          }\r\n          setStatus(\"success\");\r\n          setLoading(false);\r\n          ScrollToLoadBtn();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          setStatus(\"error\");\r\n        });\r\n    }\r\n  }, [query, page]);\r\n\r\n  const onClickLoadMore = () => {\r\n    setLoading(true);\r\n    setPage((page) => page + 1);\r\n  };\r\n  // console.log(result);\r\n  return (\r\n    <>\r\n      <Searchbar onSubmit={onSubmit} />\r\n\r\n      {status === \"pending\" && <Loader />}\r\n      {status === \"success\" && result.length > 0 && (\r\n        <>\r\n          <ul className={s.list_home_page}>\r\n            {result.map(({ id, poster_path, original_title }) => (\r\n              <Link\r\n                to={{\r\n                  pathname: `movie/${id}`,\r\n                  state: {\r\n                    from: location,\r\n                    label: \"back to search\",\r\n                  },\r\n                }}\r\n                key={id}\r\n              >\r\n                <MovieItem\r\n                  key={id}\r\n                  poster_path={poster_path}\r\n                  original_title={original_title}\r\n                />\r\n              </Link>\r\n            ))}\r\n          </ul>\r\n          <Button onClickLoadMore={onClickLoadMore}>\r\n            {loading ? (\r\n              <>\r\n                <span className={style.loader}></span>\r\n                <span>Fetch data</span>\r\n              </>\r\n            ) : (\r\n              <span>Loading more</span>\r\n            )}\r\n          </Button>\r\n        </>\r\n      )}\r\n      {status === \"success\" && result.length === 0 && (\r\n        <p>\r\n          Sorry we haven't any information for your query: '{query}',please\r\n          enter a keyword\r\n        </p>\r\n      )}\r\n      {status === \"error\" && <h1>Sorry!!!</h1>}\r\n    </>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\n\r\nconst API_KEY = \"9c85780e51be24ce66dcc89d24578143\";\r\naxios.defaults.baseURL = \"https://api.themoviedb.org/3\";\r\nconst baseURL = \"https://api.themoviedb.org/3\";\r\n// console.log(axios);\r\nexport async function fetchMovies(url = \"\", config = \"\") {\r\n  const response = await axios\r\n    .get(url, config)\r\n    .then((response) => response?.data?.results)\r\n    .catch((error) => console.log(error));\r\n  return response;\r\n  // if (response) {\r\n  //   const data = response.data.results;\r\n  //   console.log(data);\r\n  //   return data;\r\n  // }\r\n}\r\n\r\n//список самых популярных фильмов на сегодня для создания коллекции на главной странице\r\nexport function fetchMoviesByTrending(page) {\r\n  return fetchMovies(\r\n    `/trending/movie/day?api_key=${API_KEY}&language=en-US&page=${page}&include_adult=false`\r\n  );\r\n}\r\n\r\n//поиск кинофильма по ключевому слову на странице фильмов\r\nexport function fetchMoviesByKeyWord(keyWord, page) {\r\n  return fetchMovies(\r\n    `/search/movie?api_key=${API_KEY}&language=en-US&query=${keyWord}&page=${page}&include_adult=false`\r\n  );\r\n}\r\n\r\n//запрос полной информации о фильме для страницы кинофильма\r\nexport async function fetchMovieById(movie_id) {\r\n  const response = await fetch(\r\n    `${baseURL}/movie/${movie_id}?api_key=${API_KEY}&language=en-US`\r\n  );\r\n  return response.ok\r\n    ? await response.json()\r\n    : Promise.reject(new Error(\"nothing found!\"));\r\n}\r\n\r\n//запрос информации о актёрском составе для страницы кинофильма\r\nexport async function fetchMovieCredits(movie_id) {\r\n  // return fetchMovies(`/movie/${movie_id}/credits`);\r\n  const response = await fetch(\r\n    `${baseURL}/movie/${movie_id}/credits?api_key=${API_KEY}&language=en-US`\r\n  );\r\n  return response.ok\r\n    ? await response.json()\r\n    : Promise.reject(new Error(\"nothing found!\"));\r\n}\r\n\r\n//запрос полной информации о фильме для страницы кинофильма\r\nexport async function fetchMovieReviews(movie_id) {\r\n  // return fetchMovies(`/movie/${movie_id}/reviews`);\r\n  const response = await fetch(\r\n    `${baseURL}/movie/${movie_id}/reviews?api_key=${API_KEY}&language=en-US&page=1`\r\n  );\r\n  return response.ok\r\n    ? await response.json()\r\n    : Promise.reject(new Error(\"nothing found!\"));\r\n}\r\n","const ScrollToLoadBtn = () => {\r\n  return window.scrollTo({\r\n    top: document.documentElement.scrollHeight,\r\n    behavior: \"smooth\",\r\n  });\r\n};\r\n\r\nexport default ScrollToLoadBtn;\r\n","import React from \"react\";\r\n// import { Link } from \"react-router-dom\";\r\nimport s from \"./MovieItem.module.css\";\r\n\r\nexport function MovieItem({ id, poster_path, original_title }) {\r\n  return (\r\n    <li key={id} className={s.item}>\r\n      <img\r\n        className={s.item_image}\r\n        src={`https://image.tmdb.org/t/p/w500/${poster_path}`}\r\n        alt={original_title}\r\n      />\r\n\r\n      <p className={s.item_title}>{original_title}</p>\r\n    </li>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"MovieItem_item__3gpk_\",\"item_title\":\"MovieItem_item_title__2rywk\",\"item_image\":\"MovieItem_item_image__1-7ky\"};","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./Button.module.css\";\r\n\r\nexport function Button({ onClickLoadMore, children }) {\r\n  return (\r\n    <button type=\"button\" onClick={onClickLoadMore} className={s.button}>\r\n      <div className={s.btn_children}>{children}</div>\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  onClickLoadMore: PropTypes.func,\r\n  children: PropTypes.node,\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__NvhOy\",\"btn_children\":\"Button_btn_children__1ajbc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list_home_page\":\"list_list_home_page__2K_wj\",\"title\":\"list_title__3FhLN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"LoaderButton_loader__2trC1\",\"spin\":\"LoaderButton_spin__1_ijz\"};"],"sourceRoot":""}